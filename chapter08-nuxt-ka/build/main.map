{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./nuxt.config.js","webpack:///./server/config/index.js","webpack:///./server/index.js","webpack:///./server/middlewares.js","webpack:///./server/routes.js","webpack:///external \"consola\"","webpack:///external \"koa\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-favicon\"","webpack:///external \"koa-router\"","webpack:///external \"koa-static\"","webpack:///external \"nuxt\""],"names":["module","exports","mode","target","head","title","process","env","npm_package_name","meta","charset","name","content","hid","npm_package_description","link","rel","type","href","loading","color","css","plugins","components","modules","build","extend","config","ctx","static_dir","root","app","Koa","require","dev","start","nuxt","Nuxt","host","HOST","port","PORT","options","server","builder","Builder","ready","middlewares","use","status","respond","req","render","res","listen","consola","message","badge","next","throw","body","data","err","emit","serve","favicon","bodyParser","routes","allowedMethods","router","Router","prefix","middleware3","console","log","Date","now","middleware1","middleware2","users","id","get","parseInt","params","found","find","user","post","request","rawBody"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./server/index.js\");\n","module.exports = {\n  /*\n  ** Nuxt rendering mode\n  ** See https://nuxtjs.org/api/configuration-mode\n  */\n  mode: 'universal',\n\n  /*\n  ** Nuxt target\n  ** See https://nuxtjs.org/api/configuration-target\n  */\n  target: 'server',\n\n  /*\n  ** Headers of the page\n  ** See https://nuxtjs.org/api/configuration-head\n  */\n  head: {\n    title: process.env.npm_package_name || '',\n    meta: [\n      { charset: 'utf-8' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\n      { hid: 'description', name: 'description', content: process.env.npm_package_description || '' }\n    ],\n    link: [\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }\n    ]\n  },\n\n  /*\n  ** Customize the progress-bar color\n  */\n  loading: { color: '#fff' },\n\n  /*\n  ** Global CSS\n  */\n  css: [\n  ],\n\n  /*\n  ** Plugins to load before mounting the App\n  */\n  plugins: [\n  ],\n\n  /*\n  ** Auto import components\n  ** See https://nuxtjs.org/api/configuration-components\n  */\n  components: true,\n\n  /*\n  ** Nuxt.js modules\n  */\n  modules: [\n  ],\n\n  /*\n  ** Build configuration\n  */\n  build: {\n    /*\n    ** You can extend webpack config here\n    */\n    extend(config, ctx) {\n    }\n  }\n}\n","'use strict'\n\nexport default {\n  static_dir: {\n    root: '../static'\n  }\n}\n","import Koa from 'koa'\nimport consola from 'consola'\nimport { Nuxt, Builder } from 'nuxt'\nimport middlewares from './middlewares'\n\nconst app = new Koa()\n\n// Import and Set Nuxt.js options\nconst config = require('../nuxt.config.js')\nconfig.dev = !(app.env === 'production')\n\nasync function start() {\n  // Instantiate nuxt.js\n  const nuxt = new Nuxt(config)\n\n  const {\n    host = process.env.HOST || '127.0.0.1',\n    port = process.env.PORT || 3000\n  } = nuxt.options.server\n\n  // Build in development\n  if (config.dev) {\n    const builder = new Builder(nuxt)\n    await builder.build()\n  } else {\n    await nuxt.ready()\n  }\n\n  // Middlewares are imported here.\n  middlewares(app)\n\n  app.use((ctx) => {\n    ctx.status = 200\n    ctx.respond = false // Bypass Koa's built-in response handling\n    ctx.req.ctx = ctx // This might be useful later on, e.g. in nuxtServerInit or with nuxt-stash\n    nuxt.render(ctx.req, ctx.res)\n  })\n\n  app.listen(port, host)\n  consola.ready({\n    message: `Server listening on http://${host}:${port}`,\n    badge: true\n  })\n}\n\nstart()\n","'use strict'\n\n// All middlewares are used here.\n// Check other Koa official middlewares: https://github.com/koajs\nimport serve from 'koa-static'\nimport favicon from 'koa-favicon'\nimport bodyParser from 'koa-bodyparser'\nimport config from './config'\nimport routes from './routes'\n\nexport default (app) => {\n  // Catch and format the error in the upstream.\n  // https://github.com/koajs/koa/wiki/Error-Handling\n  app.use(async (ctx, next) => {\n    try {\n      await next()\n\n      // Handle 404 - throw it as an error.\n      if (ctx.status === 404) {\n        ctx.throw(404)\n      }\n\n      // Use this when you want to format the 200 res further.\n      // e.g. {\"status\":200,\"data\":{\"message\":\"Hello home sample!\"}}\n      // else, you get, e.g. {\"message\":\"Hello home sample!\"}\n      if (ctx.status === 200) {\n        ctx.body = {\n          status: 200,\n          data: ctx.body\n        }\n      }\n    } catch (err) {\n      ctx.status = err.status || 500\n\n      ctx.type = 'json'\n      ctx.body = {\n        status: ctx.status,\n        message: err.message\n      }\n\n      ctx.app.emit('error', err, ctx)\n    }\n  })\n\n  // Static files are files that clients download as they are from the server.\n  // Create a new directory, public. Koa, by default doesn't allow you to\n  // serve static files.\n  // https://github.com/koajs/static\n  // https://www.tutorialspoint.com/koajs/koajs_static_files.htm\n  app.use(serve(config.static_dir.root))\n\n  // Add favicon.\n  app.use(favicon('static/favicon.ico'))\n\n  // The parsed body will store in ctx.request.body\n  // If nothing was parsed, body will be an empty object {}\n  // https://github.com/koajs/bodyparser\n  // https://github.com/koajs/koa/issues/719\n  app.use(bodyParser())\n\n  // Add routes.\n  app.use(routes.routes(), routes.allowedMethods())\n}\n","'use strict'\n\nimport Router from 'koa-router'\nconst router = new Router({ prefix: '/api' })\n\nconst middleware3 = async (ctx, next) => {\n  console.log('Time started at: ', Date.now())\n  await next()\n}\n\nconst middleware1 = async(ctx, next) => {\n  console.log('I am the first')\n  await next()\n  console.log('I am the last')\n}\n\nconst middleware2 = async(ctx, next) => {\n  console.log('I am the second')\n  await next()\n  console.log('I am the third')\n}\n\n// Dummy users.\nconst users = [\n  { id: 1, name: 'Alexandre' },\n  { id: 2, name: 'Pooya' },\n  { id: 3, name: 'Sébastien' }\n]\n\n// Home page.\nrouter.get('/', middleware1, middleware2, middleware3, async (ctx, next) => {\n  ctx.type = 'json'\n  ctx.body = {\n    message: 'Hello World!'\n  }\n})\n\n// Get all users.\nrouter.get('/users', async (ctx, next) => {\n  ctx.type = 'json'\n  ctx.body = users\n})\n\n// Get the user by id.\nrouter.get('/users/:id', async (ctx, next) => {\n  const id = parseInt(ctx.params.id) // or ctx.request.params.id\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n  const found = users.find(function (user) {\n    return user.id == id\n  })\n  if (found) {\n    ctx.body = found\n  } else {\n    ctx.throw(404, 'user not found')\n  }\n})\n\nrouter.post('/user', async (ctx, next) => {\n  // Get the parsed data.\n  let request = ctx.request.body || {}\n  // Print the parsed data.\n  console.log(request)\n  // Print the raw data.\n  console.log(ctx.request.rawBody)\n  ctx.body = request\n})\n\nexport default router\n","module.exports = require(\"consola\");","module.exports = require(\"koa\");","module.exports = require(\"koa-bodyparser\");","module.exports = require(\"koa-favicon\");","module.exports = require(\"koa-router\");","module.exports = require(\"koa-static\");","module.exports = require(\"nuxt\");"],"sourceRoot":""}